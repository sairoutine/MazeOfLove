!function t(e,i,s){function a(o,n){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!n&&h)return h(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return a(i?i:t)},c,c.exports,t,e,i,s)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<s.length;o++)a(s[o]);return a}({1:[function(t,e,i){var s=function(){function t(t){return a.appendChild(t.dom),t}function e(t){for(var e=0;e<a.children.length;e++)a.children[e].style.display=e===t?"block":"none";i=t}var i=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",function(t){t.preventDefault(),e(++i%a.children.length)},!1);var r=(self.performance||Date).now(),o=r,n=0,h=t(new s.Panel("FPS","#0ff","#002")),u=t(new s.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new s.Panel("MB","#f08","#201"));return e(0),{REVISION:16,dom:a,addPanel:t,showPanel:e,begin:function(){r=(self.performance||Date).now()},end:function(){n++;var t=(self.performance||Date).now();if(u.update(t-r,200),t>o+1e3&&(h.update(1e3*n/(t-o),100),o=t,n=0,c)){var e=self.performance.memory;c.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){r=this.end()},domElement:a,setMode:e}};s.Panel=function(t,e,i){var s=1/0,a=0,r=Math.round,o=r(window.devicePixelRatio||1),n=80*o,h=48*o,u=3*o,c=2*o,p=3*o,f=15*o,m=74*o,l=30*o,d=document.createElement("canvas");d.width=n,d.height=h,d.style.cssText="width:80px;height:48px";var g=d.getContext("2d");return g.font="bold "+9*o+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=i,g.fillRect(0,0,n,h),g.fillStyle=e,g.fillText(t,u,c),g.fillRect(p,f,m,l),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(p,f,m,l),{dom:d,update:function(h,_){s=Math.min(s,h),a=Math.max(a,h),g.fillStyle=i,g.globalAlpha=1,g.fillRect(0,0,n,f),g.fillStyle=e,g.fillText(r(h)+" "+t+" ("+r(s)+"-"+r(a)+")",u,c),g.drawImage(d,p+o,f,m-o,l,p,f,m-o,l),g.fillRect(p+m-o,f,o,l),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(p+m-o,f,o,r((1-h/_)*l))}}},"object"==typeof e&&(e.exports=s)},{}],2:[function(t,e,i){"use strict";var s=t("./scene/stage"),a=t("stats.js"),r=function(t){this.stats=new a,this.stats.showPanel(0),document.body.appendChild(this.stats.dom),this.surface=t.getContext("2d"),this.width=Number(t.getAttribute("width")),this.height=Number(t.getAttribute("height")),this.scene=new s(this),this.images={},this.loadedImageNum=0,this.is_load_done=!1,this.frame_count=0};r.prototype.IMAGES={boss:"img/enemy.png",bullet:"img/bullet.png"},r.prototype.init=function(){var t=this,e=function(){t.loadedImageNum++;var e=Object.keys(t.IMAGES).length,i=t.loadedImageNum;i>=e&&(t.is_load_done=!0)};for(var i in t.IMAGES)t.images[i]=new Image,t.images[i].src=t.IMAGES[i],t.images[i].onload=e},r.prototype.run=function(){requestAnimationFrame(this.run.bind(this)),this.stats.begin(),this.is_load_done&&(this.scene.run(),this.scene.updateDisplay(),this.frame_count++,this.stats.end())},e.exports=r},{"./scene/stage":7,"stats.js":1}],3:[function(t,e,i){"use strict";var s=t("./game");window.onload=function(){var t=document.getElementById("mainCanvas"),e=new s(t);e.init(),e.run()}},{"./game":2}],4:[function(t,e,i){"use strict";var s=t("../object/bullet"),a=function(t,e){this.game=e,this.scene=t,this.objects=[]};a.prototype.run=function(){for(var t=0,e=this.objects.length;t<e;t++)this.objects[t].run();this.removeOutOfStageObjects()},a.prototype.updateDisplay=function(){for(var t=0,e=this.objects.length;t<e;t++)this.objects[t].updateDisplay()},a.prototype.create=function(t,e,i,a,r,o){this.objects.push(new s(this.game,t,e,i,a,r,o))},a.prototype.remove=function(t){this.objects.splice(t,1)},a.prototype.removeOutOfStageObjects=function(){for(var t=0;t<this.objects.length;t++)this.scene.isOutOfStage(this.objects[t])&&this.remove(t)},e.exports=a},{"../object/bullet":6}],5:[function(t,e,i){"use strict";var s=function(t,e){this.scene=t,this.game=e,this.frame_count=0,this.shot_theta=90,this.maru_shot_theta=0,this.add_shot_theta=15,this.uzumaki_speed=1,this.maru_percount=50,this.uzumaki_percount=25,this.maru_num=18,this.create_gui()};s.prototype.create_gui=function(){var t=this,e=new dat.GUI;e.add(t,"add_shot_theta",0,50),e.add(t,"uzumaki_speed",0,10),e.add(t,"uzumaki_percount",0,100).step(1),e.add(t,"maru_percount",0,100).step(1),e.add(t,"maru_num",0,100).step(1)},s.prototype.image=function(){return this.game.images.boss},s.prototype.image_width=function(){return.1*this.image().width},s.prototype.image_height=function(){return.1*this.image().height},s.prototype.uzumaki_shot=function(){var t=this.game.width/2,e=this.game.height/2,i=this.shot_theta,s=this.uzumaki_speed;this.scene.bulletmanager.create(t,e,s,i,9,4)},s.prototype.maru_shot=function(t){var e=this.game.width/2,i=this.game.height/2,s=this.maru_shot_theta,a=t;this.scene.bulletmanager.create(e,i,a,s,7,3)},s.prototype.run=function(){this.frame_count%this.uzumaki_percount===0&&(this.shot_theta+=this.add_shot_theta,this.maru_shot_theta+=this.add_shot_theta);for(var t=0;t<2;t++)this.uzumaki_shot(),this.shot_theta+=3;if(this.frame_count%this.maru_percount===0)for(t=0;t<this.maru_num;t++)this.maru_shot(2),this.maru_shot(2.5),this.maru_shot(3),this.maru_shot_theta+=this.add_shot_theta;this.frame_count++},s.prototype.updateDisplay=function(){var t=this.get_coordinate_of_center();this.game.surface.save(),this.game.surface.drawImage(this.image(),t.width,t.height,this.image_width(),this.image_height()),this.game.surface.restore()},s.prototype.get_coordinate_of_center=function(){var t=(this.game.width-this.image_width())/2,e=(this.game.height-this.image_height())/2;return{width:t,height:e}},e.exports=s},{}],6:[function(t,e,i){"use strict";var s=function(t,e,i,s,a,r,o){this.game=t,this.x=e,this.y=i,this.r=s,this.theta=a,this.sprite_x=r||0,this.sprite_y=o||0};s.prototype.run=function(){this.x+=this.calc_moveX(),this.y+=this.calc_moveY()},s.prototype.updateDisplay=function(){this.game.surface.save(),this.game.surface.translate(this.x,this.y),this.game.surface.rotate(this._theta_to_radian(this.theta+90)),this.game.surface.drawImage(this.image(),this.spriteWidth()*this.spriteX(),this.spriteHeight()*this.spriteY(),this.spriteWidth(),this.spriteHeight(),-this.spriteWidth()/2,-this.spriteHeight()/2,this.imageWidth(),this.imageHeight()),this.game.surface.restore()},s.prototype.image=function(){return this.game.images.bullet},s.prototype.rx=function(){return this.x-this.spriteWidth()},s.prototype.ry=function(){return this.y-this.spriteHeight()},s.prototype.imageWidth=function(){return 12},s.prototype.imageHeight=function(){return 12},s.prototype.spriteWidth=function(){return 16},s.prototype.spriteHeight=function(){return 16},s.prototype.spriteX=function(){return this.sprite_x},s.prototype.spriteY=function(){return this.sprite_y},s.prototype._theta_to_radian=function(t){var e=t/180*Math.PI;return e},s.prototype._radian_to_theta=function(t){return 180*t/Math.PI|0},s.prototype.calc_moveX=function(){var t=this.r*Math.cos(this._theta_to_radian(this.theta));return t},s.prototype.calc_moveY=function(){var t=this.r*Math.sin(this._theta_to_radian(this.theta));return t},e.exports=s},{}],7:[function(t,e,i){"use strict";var s=t("../object/boss"),a=t("../manager/bullet"),r=function(t){this.game=t,this.boss=new s(this,t),this.bulletmanager=new a(this,t)};r.prototype.EXTRA_OUT_OF_STAGE_SIZE=100,r.prototype.run=function(){this.boss.run(),this.bulletmanager.run()},r.prototype.updateDisplay=function(){this._showBackground(),this.boss.updateDisplay(),this.bulletmanager.updateDisplay()},r.prototype._showBackground=function(){this.game.surface.save(),this.game.surface.fillStyle="rgb(0, 0, 0)",this.game.surface.fillRect(0,0,this.game.width,this.game.height),this.game.surface.restore()},r.prototype.isOutOfStage=function(t){var e=t.x,i=t.y;return e+this.EXTRA_OUT_OF_STAGE_SIZE<0||i+this.EXTRA_OUT_OF_STAGE_SIZE<0||e>this.game.width+this.EXTRA_OUT_OF_STAGE_SIZE||i>this.game.height+this.EXTRA_OUT_OF_STAGE_SIZE},e.exports=r},{"../manager/bullet":4,"../object/boss":5}]},{},[3]);